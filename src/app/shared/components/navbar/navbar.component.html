<mat-toolbar color="primary" class="navbar">
    <div class="navbar-container">
        <div class="navbar-brand">
            <mat-icon class="logo-icon">currency_bitcoin</mat-icon>
            <span class="app-title">CryptoCollector</span>
        </div>

        @if (isAuthenticated()) {
        <nav class="navbar-nav" role="navigation" aria-label="Navegación principal">
            <a mat-button routerLink="/crypto" routerLinkActive="active" aria-label="Ver lista de criptomonedas">
                <mat-icon aria-hidden="true">list</mat-icon>
                Criptomonedas
            </a>
        </nav>
        }

        <span class="spacer"></span>

        @if (isAuthenticated()) {
        <div class="user-menu">
            <button mat-button [matMenuTriggerFor]="userMenu" class="user-button" aria-label="Menú de usuario"
                aria-haspopup="true">
                <div class="user-avatar" aria-hidden="true">{{ getUserInitials() }}</div>
                <span class="user-name">{{ getUserFullName() }}</span>
                <mat-icon aria-hidden="true">arrow_drop_down</mat-icon>
            </button>

            <mat-menu #userMenu="matMenu">
                <div class="user-menu-header">
                    <div class="user-avatar-large">{{ getUserInitials() }}</div>
                    <div class="user-info">
                        <div class="user-full-name">{{ getUserFullName() }}</div>
                        <div class="user-email">{{ user()?.email }}</div>
                    </div>
                </div>
                <mat-divider></mat-divider>
                <button mat-menu-item (click)="logout()" aria-label="Cerrar sesión y salir de la aplicación">
                    <mat-icon aria-hidden="true">logout</mat-icon>
                    <span>Cerrar Sesión</span>
                </button>
            </mat-menu>
        </div>
        } @else {
        <div class="auth-buttons">
            <button mat-button routerLink="/dashboard/login">
                <mat-icon>login</mat-icon>
                Iniciar Sesión
            </button>
            <button mat-raised-button color="accent" routerLink="/dashboard/signup">
                Registrarse
            </button>
        </div>
        }
    </div>
</mat-toolbar>